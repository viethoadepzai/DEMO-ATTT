<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>SC06 - Unchecked External Calls (Hardhat + MetaMask)</title>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; margin: 20px; background-color: #f4f4f4; }
    .container { max-width: 700px; margin: auto; padding: 20px; background-color: #fff; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    h2, h3 { color: #333; }
    .section { border-top: 1px solid #eee; padding: 15px 0; }
    button { font-size: 16px; margin: 5px; padding: 10px 15px; border: none; border-radius: 5px; cursor: pointer; background-color: #007bff; color: white; }
    button:hover { background-color: #0056b3; }
    button.danger { background-color: #dc3545; }
    button.danger:hover { background-color: #c82333; }
    button.gray { background-color: #6c757d; }
    button.gray:hover { background-color: #5a6268; }
    input { width: 95%; padding: 8px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 4px; }
    #status { font-weight: bold; padding: 10px; background-color: #eee; border-radius: 5px; margin-top: 10px; white-space: pre-line; }
  </style>
</head>
<body>
  <div class="container">
    <h2>ğŸ§ª Demo SC06 - Unchecked External Calls (Hardhat + MetaMask)</h2>
    <p>MÃ´ phá»ng lá»—i gá»i hÃ m bÃªn ngoÃ i mÃ  khÃ´ng kiá»ƒm tra káº¿t quáº£ (success) trÃªn há»£p Ä‘á»“ng Bank.</p>

    <!-- 1. Káº¿t ná»‘i MetaMask -->
    <button id="connectButton">1. Connect MetaMask</button>
    <hr>

    <!-- 2. Äá»‹a chá»‰ há»£p Ä‘á»“ng -->
    <div class="section">
      <b>2. Äá»‹a chá»‰ Há»£p Ä‘á»“ng (Copy tá»« terminal deploy):</b><br>
      <input type="text" id="bankAddr" placeholder="Äá»‹a chá»‰ SC06_VulnerableBank"><br>
      <input type="text" id="attackAddr" placeholder="Äá»‹a chá»‰ SC06_Attack">
    </div>

    <!-- 3. Náº¡n nhÃ¢n & Hacker -->
    <div class="section">
      <h3>3. ğŸ‘¿ Náº¡n nhÃ¢n & Hacker</h3>
      <p>Khi deploy, Deployer Ä‘Ã£ náº¡p sáºµn 10 ETH vÃ o Bank. Giá» chÃºng ta Ä‘Ã³ng vai <b>há»£p Ä‘á»“ng Attack</b>.</p>
      <button id="btnDepositViaAttack">3.1 Gá»­i 3 ETH vÃ o Bank thÃ´ng qua Attack (depositToBank)</button>
      <button id="btnRunAttack" class="danger">3.2 Cháº¡y Attack (attackWithdraw 3 ETH)</button>
    </div>

    <!-- 4. Kiá»ƒm tra tráº¡ng thÃ¡i -->
    <div class="section">
      <h3>4. ğŸ“Š Kiá»ƒm tra Tráº¡ng thÃ¡i</h3>
      <button id="getBankBalance" class="gray">Xem sá»‘ dÆ° ETH cá»§a Bank</button>
      <button id="getAttackBalance" class="gray">Xem balances[Attack] trong Bank</button>
      <button id="getMyEth" class="gray">Xem ETH cá»§a vÃ­ hiá»‡n táº¡i</button>

      <div id="status">Chá» káº¿t ná»‘i...</div>
    </div>
  </div>

  <!-- ethers.js giá»‘ng SC05 -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.6.9/ethers.umd.min.js"></script>
  <script src="./sc06_app.js"></script>
</body>
</html>
