<!DOCTYPE html>
<html>
<head>
  <title>Reentrancy Attack Demo (Auction)</title>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; margin: 20px; background-color: #f4f4f4; }
    .container { max-width: 700px; margin: auto; padding: 20px; background-color: #fff; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    h2, h3 { color: #333; }
    .section { border-top: 1px solid #eee; padding: 15px 0; }
    button { font-size: 16px; margin: 5px; padding: 10px 15px; border: none; border-radius: 5px; cursor: pointer; background-color: #007bff; color: white; }
    button:hover { background-color: #0056b3; }
    button.danger { background-color: #dc3545; }
    button.danger:hover { background-color: #c82333; }
    input { width: 95%; padding: 8px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 4px; }
    #status { font-weight: bold; padding: 10px; background-color: #eee; border-radius: 5px; margin-top: 10px; }
  </style>
</head>
<body>
  <div class="container">
    <h2>üöÄ Demo T·∫•n c√¥ng Reentrancy (Hardhat + MetaMask)</h2>
    <p>M√¥ ph·ªèng k·ªãch b·∫£n t·∫•n c√¥ng v√†o H·ª£p ƒë·ªìng ƒê·∫•u gi√° (Auction).</p>

    <button id="connectButton">1. Connect MetaMask</button>
    <hr>

    <div class="section">
      <b>ƒê·ªãa ch·ªâ H·ª£p ƒë·ªìng (Copy t·ª´ terminal deploy):</b><br>
      <input type="text" id="auctionAddr" placeholder="Dia chi VulnerableAuction (Auction.sol)"><br>
      <input type="text" id="attackAddr" placeholder="Dia chi Attack (AuctionAttack.sol)">
    </div>

    <div class="section">
      <h3>üëø Vai Hacker (Chuy·ªÉn MetaMask sang Account 1)</h3>
      <p>N·∫°n nh√¢n ƒë√£ n·∫°p 10 ETH khi deploy. Gi·ªù l√† l√∫c t·∫•n c√¥ng.</p>
      <button id="setupAttackButton">2. N·∫°p 3 ETH "m·ªìi" (Setup Attack)</button>
      <button id="runAttack" class="danger">3. !!! RUN ATTACK (withdrawRefund) !!!</button>
      <button id="drainFunds">4. R√∫t h·∫øt ti·ªÅn v·ªÅ v√≠</button>
    </div>

    <div class="section">
      <h3>üìä Ki·ªÉm tra Tr·∫°ng th√°i</h3>
      <button id="getAuctionBalance">Xem ti·ªÅn c·ªßa Auction (N·∫°n nh√¢n)</button>
      <button id="getAttackBalance">Xem ti·ªÅn c·ªßa Attack (Hacker)</button>
      <div id="status">Ch·ªù k·∫øt n·ªëi...</div>
    </div>
  </div>

  <!-- Import ethers.js v√† app.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.6.9/ethers.umd.min.js"></script>
  <script src="./app.js"></script>
</body>
</html>